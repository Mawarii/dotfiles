---
- name: Configure firewall
  hosts: localhost
  become: false
  gather_facts: false
  roles:
    - configure-firewall

- name: Machine hardening
  hosts: all
  become: true
  gather_facts: true
  roles:
    - machine-hardening

- name: Close default SSH port
  hosts: localhost
  become: false
  gather_facts: false
  tasks:
    - ansible.builtin.import_tasks:
      name: Close default SSH port
      file: roles/configure-firewall/tasks/close-default-ssh-port.yaml

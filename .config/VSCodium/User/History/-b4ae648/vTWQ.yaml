apiVersion: batch/v1
kind: CronJob
metadata:
  name: govforms2-akeneo-import-job
  labels:
    k8s-env: develop
spec:
  schedule: "*/5 * * * *"
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: akeneo-import-job
              env:
                - name: IMPORT_WORKFLOW_STAGE
                  value: "test"
                - name: AKENEO_BASEURL
                  value: "https://govforms2-akeneo.efa-stage.owl-it.de"
                - name: IMPORT_WORKFLOW_USERNAME
                  value: "govforms2_9817"
                - name: IMPORT_WORKFLOW_CLIENT_ID
                  value: "2_3gvt5w521aucg4owkcgw8gccg00wwk4ggg8wgs4og00cowgs0c"
                - name: IMPORT_WORKFLOW_SECRET
                  value: "3euzcx1i6pics0o84ok88osscow4kskok4ksc44cs80wos4g8g"
                - name: IMPORT_WORKFLOW_PASSWORD
                  value: "316074f90"
                - name: DATABASE_USER
                  valueFrom:
                    secretKeyRef:
                      name: mariadb-wsp-secret
                      key: mariadb-user
                - name: DATABASE_PW
                  valueFrom:
                    secretKeyRef:
                      key: mariadb-password
                      name: mariadb-wsp-secret
                - name: DATABASE_URL_FORM
                  value: "mysql://$(DATABASE_USER):$(DATABASE_PW)@mariadb.govforms2-workflow-core-test.svc:3306/form?serverVersion=mariadb-10.11.2&charset=utf8"

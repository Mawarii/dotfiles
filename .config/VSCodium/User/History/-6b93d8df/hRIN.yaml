apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
    name: customercluster-empfangsclient-vault
    namespace: argocd
spec:
    destination:
        namespace: empfangsclient-vault
        name: publicplan-customer
    project: customercluster-projects-empfangsclient
    sources:
        -   repoURL: 'https://helm.releases.hashicorp.com'
            targetRevision: 0.28.1
            helm:
                valueFiles:
                    - $values/vault/values.yaml
            chart: vault
        -   repoURL: git@gitlab.publicplan.cloud:themenwelt-portalverbund/empfangs-client/kubernetes-dist.git
            targetRevision: HEAD
            ref: values
    syncPolicy:
        automated:
            prune: true
            selfHeal: true
        syncOptions:
            - CreateNamespace=true
    ignoreDifferences:
        -   group: admissionregistration.k8s.io
            kind: MutatingWebhookConfiguration
            jqPathExpressions:
                -   '.webhooks[]?.clientConfig.caBundle'
kind: Kustomization
apiVersion: kustomize.config.k8s.io/v1beta1

resources:
  - ../../base/
  - resources/formio-service.yaml
  - resources/formio-mongodb-service.yaml

patches:
  - path: ./api-gateway-ingress.patch.yaml
    target:
      kind: Ingress
      name: api-gateway
  - path: ./frs-ingress.patch.yaml
    target:
      kind: Ingress
      name: frs

images:
  - name: gitlab.publicplan.cloud:5050/themenwelt-kommunales/poc/baukasten-formio-gateway
    newName: gitlab.publicplan.cloud:5050/themenwelt-kommunales/poc/baukasten-formio-gateway
    newTag: v1.35.1
  - name: gitlab.publicplan.cloud:5050/themenwelt-kommunales/poc/forest-nextjs-rebuild/baukasten
    newName: gitlab.publicplan.cloud:5050/themenwelt-kommunales/poc/forest-nextjs-rebuild/baukasten
    newTag: v2.7.2

configMapGenerator:
  - envs:
      - mixins/api-gateway-config.env
    name: api-gateway-config
    options:
      disableNameSuffixHash: true
  - envs:
      - mixins/frs-config.env
    name: frs-config
    options:
      disableNameSuffixHash: true

secretGenerator:
  - envs:
      - mixins/api-gateway-secrets.env
    name: api-gateway-secrets
    options:
      disableNameSuffixHash: true
  - envs:
      - mixins/keycloak-secrets.env
    name: keycloak-auth-formularbaukasten
    options:
      disableNameSuffixHash: true

# CLOPS Helm Chart
Installs various components to monitor your K8s cluster, including:
- [Kube-Prometheus-Stack](https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack)
    - Alertmanager
    - Kube State Metrics
    - Prometheus Operator
    - Prometheus Node Exporter
    - Prometheus
- [Metrics Server](https://github.com/kubernetes-sigs/metrics-server/tree/master/charts/metrics-server)
- [Grafana](https://github.com/grafana/helm-charts/tree/main/charts/grafana)
- [Promtail](https://github.com/grafana/helm-charts/tree/main/charts/promtail)
- [Loki](https://github.com/grafana/loki/tree/main/production/helm/loki)
- [Prometheus Blackbox Exporter](https://github.com/prometheus-community/helm-charts/tree/main/charts/prometheus-blackbox-exporter)

## Upgrading
Please see the [UPGRADING.md](./UPGRADING.md) for infos on breaking changes or extra changes.

## Requirements
- An already running K8s cluster
- [Helm](https://helm.sh)

## Usage
Add the helm repo, edit the values.yaml to your liking and install the chart:
> :warning: We changed our Helm repo URL from `https://chartmuseum.cloudical.net/clops` to `https://chartmuseum.live.publicplan.cloud/clops` !

```
helm repo add clops https://chartmuseum.live.publicplan.cloud/clops
helm upgrade --install --namespace clops --create-namespace clopsmonitoring clops/clops-helm -f values.yaml
```

## Variables
> :warning: At the moment you need to change the URL not only of **global.domain** but also of **grafana.ingress.hosts**, **grafana.ingress.tls**, **loki.gateway.ingress.hosts**, **loki.gateway.ingress.tls** and **loki.loki.storage.s3.endpoint** !

For a complete list of available variables, please refer to [VARIABLES.md](./VARIABLES.md). This file is automatically generated using [helm-docs](https://github.com/norwoodj/helm-docs).

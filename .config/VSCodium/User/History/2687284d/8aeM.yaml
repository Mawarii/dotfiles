apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
  - ../../../../databases/bitnami-mongodb-6.0.10-debian-11-r8/overlays/pre-stage
  - formio-version-ingress.yaml
  - formio-temp-pvc.patch.yaml

patches:
  - path: formio.patch.yaml
    target:
      kind: Deployment
      name: formio
  - path: formio-ingress.patch.yaml
    target:
      kind: Ingress
      name: formio-ingress
  - path: mongodb-secret.patch.yaml
    target:
      kind: Secret
      name: mongodb
  - path: mongodb.patch.yaml
    target:
      kind: Deployment
      name: mongodb
images:
  - name: DOCKER_IMAGE_1
    newName: formio/formio-enterprise
    newTag: "9.2.8"
  - name: DOCKER_IMAGE_1_ORIGIN
    newName: formio/formio-enterprise
    newTag: "9.2.8"
  - name: DOCKER_IMAGE_3
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/infrastruktur/common/base-images/nginx-hardened
    newTag: "v0.0.1"
  - name: DOCKER_IMAGE_3_ORIGIN
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/infrastruktur/common/base-images/nginx-hardened
    newTag: "v0.0.1"
  - name: DOCKER_IMAGE_4
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/infrastruktur/tools/version-sidecar
    newTag: v1.3.2
  - name: DOCKER_IMAGE_4_ORIGIN
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/infrastruktur/tools/version-sidecar
    newTag: v1.3.2
  - name: DOCKER_IMAGE_5
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/govforms/formio-cli
    newTag: latest
  - name: DOCKER_IMAGE_5_ORIGIN
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/govforms/formio-cli
    newTag: latest
  - name: DATABASE_DOCKER_IMAGE_6
    newName: gitlab.publicplan.cloud:5050/themenwelt-wirtschaft/infrastruktur/common/app-configs/bitnami/mongodb
    newTag: "6.0.10-debian-11-r8"
  - name: DATABASE_DOCKER_IMAGE_6_ORIGIN
    newName: bitnami/mongodb
    newTag: "6.0.10-debian-11-r8"

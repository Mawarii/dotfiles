apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base
  # - resources/formio-read-user-configmap.yaml

patches:
  - path: formio-deployment.patch.yaml
    target:
      kind: Deployment
      name: formio
  - path: formio-ingress.patch.yaml
    target:
      kind: Ingress
      name: formio
  - path: formio-mongodb-extra-secret.patch.yaml
    target:
      kind: Secret
      name: formio-mongodb-extra-secret
# - path: formio-mongodb-read-secret.patch.yaml
#   target:
#     kind: Secret
#     name: formio-mongodb-read-secret

images:
  - name: formio/formio-enterprise
    newTag: 9.3.3

configMapGenerator:
  - name: formio-config
    envs:
      - mixins/formio-config.env
    options:
      disableNameSuffixHash: true

secretGenerator:
  - name: formio-secret
    envs:
      - mixins/formio-secret.env
    options:
      disableNameSuffixHash: true

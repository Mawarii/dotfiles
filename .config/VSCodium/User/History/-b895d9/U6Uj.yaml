apiVersion: batch/v1
kind: CronJob
metadata:
  name: monitoring
spec:
  timeZone: "Europe/Berlin"
  schedule: "* * * * *"
  jobTemplate:
    spec:
      template:
        metadata:
          name: monitoring
          labels:
            app: monitoring
          annoations:
            ciu.enable: "true"
        spec:
          securityContext:
            runAsUser: 10001
            runAsGroup: 10001
          containers:
            - name: monitoring
              image: curlimages/curl:8.8.0
              args:
                - "https://uptime.mawari.eu/api/push/oodaPFMhOM?status=up&msg=OK"
              securityContext:
                allowPrivilegeEscalation: false
                readOnlyRootFilesystem: true
                runAsNonRoot: true
                capabilities:
                  drop: ["ALL"]
          restartPolicy: Never
      backoffLimit: 3

apiVersion: batch/v1
kind: CronJob
metadata:
  name: filebrowser
spec:
  timeZone: "Europe/Berlin"
  schedule: "* * * * *"
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app: filebrowser-mon
          annoations:
            ciu.enable: "true"
        spec:
          securityContext:
            runAsUser: 10001
            runAsGroup: 10001
          containers:
          - name: ciu
            image: mawari/ciu:v1.0.3
            env:
            - name: GOTIFY_URL
              value: "https://gotify.mawari.eu"
            - name: GOTIFY_TOKEN
              value: "A3cUFmdrBZLvT33"
            securityContext:
              allowPrivilegeEscalation: false
              readOnlyRootFilesystem: true
              runAsNonRoot: true
              capabilities:
                drop: ["ALL"]
          restartPolicy: Never
      backoffLimit: 3

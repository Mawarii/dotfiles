apiVersion: postgresql.cnpg.io/v1
kind: Cluster
metadata:
  name: keycloak-postgresql
spec:
  instances: 2
  postgresUID: 26
  postgresGID: 26
  primaryUpdateStrategy: unsupervised
  bootstrap:
    initdb:
      database: keycloak
      owner: keycloak
  storage:
    size: 15Gi
  # backup:
  #   barmanObjectStore:
  #     destinationPath: "s3://efa-pre-stage-cloudnative-pg/empfangsclient"
  #     endpointURL: https://nbg1.your-objectstorage.com
  #     s3Credentials:
  #       accessKeyId:
  #         name: cluster-stage-vars
  #         key: CLUSTER_STAGE_S3_ACCESS_KEY
  #       secretAccessKey:
  #         name: cluster-stage-vars
  #         key: CLUSTER_STAGE_S3_SECRET_KEY
  #   retentionPolicy: "30d"

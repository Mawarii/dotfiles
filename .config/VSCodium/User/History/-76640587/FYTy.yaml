apiVersion: v1
kind: ConfigMap
metadata:
  name: configuration-files
data:
  httpd.conf: |
    ServerRoot "/usr/local/apache2"
    Listen 8080
    ServerAdmin you@example.com
    DocumentRoot "/usr/local/apache2/htdocs"

    <Directory "/usr/local/apache2/htdocs">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Log to stdout/stderr
    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 "%t %h \"%r\" %>s %bbytes \"%{Referer}i\" \"%{User-Agent}i\" %Ts"

    LoadModule authz_core_module modules/mod_authz_core.so
    LoadModule rewrite_module modules/mod_rewrite.so
    LoadModule mpm_event_module modules/mod_mpm_event.so
    LoadModule log_config_module modules/mod_log_config.so
    LoadModule unixd_module modules/mod_unixd.so
    LoadModule mime_module modules/mod_mime.so

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f
        RewriteRule ^(.*)$ $1 [L]

        RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}/index.html -f
        RewriteRule ^(.*)$ $1/index.html [L]
    </IfModule>
  rsyncd.conf: |
    port = 1873
    [staticfiles]
       path = /srv
       read only = no
       list = yes

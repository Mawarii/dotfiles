# Author: Gurumoorthy Mohan
services:
  forms-flow-forms-db:
    container_name: forms-flow-forms-db
    image: harbor.cloudical.net/formsflow/mongo:7.0.9-rc0-jammy
    restart: always
    hostname: forms-flow-forms-db
    ports:
      - '27018:27017'
    environment:
      MONGO_INITDB_ROOT_USERNAME: ${FORMIO_DB_USERNAME:-admin}
      MONGO_INITDB_ROOT_PASSWORD: ${FORMIO_DB_PASSWORD:-changeme}
      MONGO_INITDB_DATABASE: ${FORMIO_DB_NAME:-formio}
    volumes:
      - ./001_custom_user.js:/docker-entrypoint-initdb.d/001_user.js:ro

  forms-flow-bpm-db:
    image: harbor.cloudical.net/formsflow/postgresql:16.2.0-debian-12-r15
    container_name: forms-flow-bpm-db
    environment:
      POSTGRES_USER: ${CAMUNDA_JDBC_USER:-admin}
      POSTGRES_PASSWORD: ${CAMUNDA_JDBC_PASSWORD:-changeme}
      POSTGRES_DB: ${CAMUNDA_JDBC_DB_NAME:-bpm}
    ports:
      - '5432:5432'
    restart: always

  forms-flow-webapi-db:
    container_name: forms-flow-webapi-db
    image: harbor.cloudical.net/formsflow/postgresql:16.2.0-debian-12-r15
    environment:
      POSTGRES_USER: ${FORMSFLOW_API_DB_USER:-admin}
      POSTGRES_PASSWORD: ${FORMSFLOW_API_DB_PASSWORD:-changeme}
      POSTGRES_DB: ${FORMSFLOW_API_DB_NAME:-webapi}
    ports:
      - '6432:5432'
    restart: always

- name: Bootstrap first controlplane
  hosts: controlplanes[0]
  become: true
  gather_facts: true
  roles:
    - role: bootstrap-cluster
      custom_action: first-controlplane
    - role: bootstrap-cluster
      custom_action: generate-join-variables

- name: Join new controlplane
  hosts: controlplanes[1:]
  become: true
  gather_facts: true
  roles:
    - role: bootstrap-cluster
      custom_action: join-node

- name: Join new worker
  hosts: worker
  become: true
  gather_facts: true
  roles:
    - role: bootstrap-cluster
      custom_action: join-node

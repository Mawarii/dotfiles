global:
  domain: "{{ argocd_domain }}"

server:
  ingress:
    enabled: true
    ingressClassName: nginx
    hostname: "{{ argocd_domain }}"
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    tls: true

configs:
  ######################################################
  # Addititional configuration for OIDC with Keycloak
  ######################################################
  secret:
    extra:
      oidc.keycloak.clientSecret: '<your-client-secret>'
  rbac:
    create: false
  cm:
    exec.enabled: true 
    oidc.config: |  
      name: Keycloak
      issuer: https://keycloak.example.com/auth/realms/argocd
      clientID: argocd-wsp-pre-stage
      clientSecret: $oidc.keycloak.clientSecret
      requestedScopes: ["openid", "profile", "email", "groups"]
  params:
    # server.oidc.cache.expiration: "60m0s"
    server.insecure: true

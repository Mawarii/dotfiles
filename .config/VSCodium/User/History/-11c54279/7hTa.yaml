apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base

patches:
  - path: formio-deployment.patch.yaml
    target:
      kind: Deployment
      name: formio
  - path: formio-ingress.patch.yaml
    target:
      kind: Ingress
      name: formio
  - path: formio-mongodb-extra-secret.patch.yaml
    target:
      kind: Secret
      name: formio-mongodb-extra-secret

images:
  - name: formio/formio-enterprise
    newTag: 9.2.5

configMapGenerator:
  - name: formio-server
    envs:
      - mixins/formio-config.env
    options:
      disableNameSuffixHash: true

secretGenerator:
  - name: formio-server
    envs:
      - mixins/formio-secrets.env
    options:
      disableNameSuffixHash: true

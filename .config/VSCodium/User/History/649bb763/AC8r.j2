---
apiVersion: kubeadm.k8s.io/v1beta4
kind: InitConfiguration
nodeRegistration:
  criSocket: "unix:///var/run/crio/crio.sock"
  kubeletExtraArgs:
  - name: "v"
    value: "4"
  - name: "node-ip"
    value: "{{ local_ip_address[0] }}"
localAPIEndpoint:
  advertiseAddress: "{{ local_ip_address[0] }}"
---
apiVersion: kubeadm.k8s.io/v1beta4
kind: ClusterConfiguration
etcd:
  local:
    extraArgs:
      - name: listen-metrics-urls
        value: "http://127.0.0.1:2381"
networking:
  serviceSubnet: "10.96.0.0/16"
  podSubnet: "10.0.0.0/8"
  dnsDomain: "cluster.local"
controlPlaneEndpoint: "{{ kubernetes_api_url }}:6443"
controllerManager:
  extraArgs:
    - name: bind-address
      value: "0.0.0.0"
scheduler:
  extraArgs:
    - name: bind-address
      value: "0.0.0.0"

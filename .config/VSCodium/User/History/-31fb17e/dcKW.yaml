---
- name: Add firewall rules for public communication
  hetzner.hcloud.firewall:
    api_token: "{{ hcloud_token }}"
    name: "k8s_pub"
    rules:
      - port: "{{ ssh_port }}"
        protocol: tcp
        direction: in
        source_ips:
          - 0.0.0.0/0
      - port: 30080
        protocol: tcp
        direction: in
        source_ips:
          - 0.0.0.0/0
      - port: 30443
        protocol: tcp
        direction: in
        source_ips:
          - 0.0.0.0/0
      - port: 6443
        protocol: tcp
        direction: in
        source_ips:
          - 0.0.0.0/0
    state: present

---
# - name: Create sshd configuration file
#   ansible.builtin.template:
#     src: ./templates/sshd_config.j2
#     dest: /etc/ssh/sshd_config.d/shield.conf
#     owner: root
#     group: root
#     mode: '0600'

## TODO: Get Hetzner Cloud firewall and replace ssh port rule if hcloud token is set
- name: Gather Hetzner Cloud firewall info
  when: hcloud_token != ""
  hetzner.hcloud.firewall:
    api_token: "{{ hcloud_token }}"
    name: "k8s_pub"
    rules:
      - description: "SSH"
        port: 22222
    state: present
